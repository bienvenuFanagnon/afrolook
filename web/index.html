<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ✅ Titre & Description -->
  <title>Afrolook - Le réseau social africain des créateurs</title>
  <meta name="description" content="Afrolook est le réseau social africain qui met en valeur les créateurs de contenus. Publie des vidéos payantes, fais des lives, et monétise ton audience depuis l'Afrique.">

  <!-- ✅ SEO -->
  <meta name="keywords" content="Afrolook, réseau social africain, créateurs africains, contenu payant, live, monétisation Afrique, afro influenceur">
  <meta name="author" content="Afrolook">

  <!-- ✅ Base href pour Flutter -->
  <base href="$FLUTTER_BASE_HREF">

  <!-- ✅ Favicon et icônes -->
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">
  <link rel="manifest" href="manifest.json">

  <!-- ✅ iOS Meta -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Afrolook">

  <!-- ✅ Open Graph (Facebook / WhatsApp / LinkedIn) -->
  <meta property="og:title" content="Afrolook - Le réseau social africain des créateurs">
  <meta property="og:description" content="Publie, vends, fais des lives et monétise ton audience en Afrique avec Afrolook. Rejoins la révolution des créateurs africains.">
  <meta property="og:image" content="https://afrolooki.web.app/icons/Icon-maskable-512.png">
  <meta property="og:url" content="https://afrolooki.web.app/">
  <meta property="og:type" content="website">

  <!-- ✅ Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Afrolook - Réseau Social Africain">
  <meta name="twitter:description" content="Rejoins Afrolook pour publier, vendre tes contenus, faire des lives et monétiser ton audience en Afrique.">
  <meta name="twitter:image" content="https://afrolooki.web.app/icons/Icon-maskable-512.png">

  <!-- ✅ Script Flutter -->
  <script>
    const serviceWorkerVersion = null;
  </script>
  <script src="flutter.js" defer></script>
</head>
<body>
  <script src='https://cdn.jsdelivr.net/npm/pdfjs-dist@4.6.82/build/pdf.min.mjs' type='module'></script>
  <script type='module'>
  var { pdfjsLib } = globalThis;
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.6.82/build/pdf.worker.mjs';

  var pdfRenderOptions = {
    cMapUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.6.82/cmaps/',
    cMapPacked: true,
  }
  </script>
<script>
  window.addEventListener('load', function () {
    _flutter.loader.loadEntrypoint({
      serviceWorker: {
        serviceWorkerVersion: serviceWorkerVersion,
      }
    }).then(function (engineInitializer) {
      return engineInitializer.initializeEngine();
    }).then(function (appRunner) {
      return appRunner.runApp();
    });
  });
</script>
  <script>
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      // Empêche la bannière automatique de s'afficher tout de suite
      e.preventDefault();
      deferredPrompt = e;

      console.log("PWA: L'app peut être installée.");

      // Optionnel : Tu peux envoyer un message à Flutter ici pour afficher ton propre bouton
      // window.parent.postMessage("pwa-install-available", "*");
    });

    // Fonction que tu pourras appeler depuis Flutter plus tard si tu veux
    window.installPWA = async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        console.log(`Utilisateur a répondu : ${outcome}`);
        deferredPrompt = null;
      } else {
        alert("L'application est déjà installée ou votre navigateur ne supporte pas l'installation automatique.");
      }
    };
  </script>
</body>
</html>
